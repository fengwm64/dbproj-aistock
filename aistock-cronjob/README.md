# AI股票数据采集定时任务

本项目包含一系列定时任务脚本，用于自动采集和处理股票相关数据，包括股票名称、实时行情、历史数据、热门股票以及财经新闻等。

## 定时任务列表

以下是已配置的定时任务及其执行时间：

| 定时表达式 | 脚本名称 | 执行时间 | 功能描述 |
|------------|---------|---------|---------|
| `35 9 * * 1-5` | `get_stock_name.py` | 工作日9:35 | 获取A股股票代码和名称 |
| `*/30 8-17 * * 1-5` | `get_hot_stock.py` | 工作日8:00-17:00，每30分钟 | 获取热门股票排行 |
| `0 1 * * 1-5` | `get_stock_info.py` | 工作日1:00 | 获取股票详细信息 |
| `* 9-16 * * 1-5` | `get_realtime_quotes.py` | 工作日9:00-16:59，每分钟 | 获取实时行情数据 |
| `*/5 * * * *` | `get_hk_news.py` | 每5分钟 | 获取港股相关新闻 |
| `*/5 * * * *` | `get_cn_news.py` | 每5分钟 | 获取A股相关新闻 |
| `* 20 * * 1-5` | `get_stock_history.py` | 工作日20:00-20:59，每分钟 | 获取股票历史数据 |

## Cron 表达式说明

Cron表达式由五个字段组成，按顺序分别表示：
* 分钟 (0-59)
* 小时 (0-23)
* 日期 (1-31)
* 月份 (1-12)
* 星期几 (0-7)，其中0和7都表示周日

常用符号：
* `*`: 表示任意值
* `*/n`: 表示每隔n单位执行一次
* `n-m`: 表示n到m范围内的值
* `1-5`: 表示周一到周五

## 脚本功能详解

### get_stock_name.py
从akshare获取A股所有上市公司的代码和名称，并保存到数据库中。

### get_hot_stock.py
获取国内和港股市场的热门股票排行，每30分钟更新一次。

### get_stock_info.py
获取股票的详细基本面信息，包括总市值、流通市值、行业分类等。

### get_realtime_quotes.py
在交易时段内每分钟获取实时行情数据，包括最新价、涨跌幅、成交量等信息。

### get_hk_news.py
每5分钟获取一次港股相关财经新闻，实时更新市场动态。

### get_cn_news.py
每5分钟获取一次A股相关财经新闻，保持对市场信息的及时追踪。

### get_stock_history.py
收盘后获取股票的历史行情数据，用于技术分析和趋势研究。

## 安装和使用

所有脚本依赖于conda环境`aistock`，在执行前请确保已正确安装并配置环境。

### 手动执行
可以在命令行中手动执行任何脚本：

```bash
cd /projects/aistock/cronjob && /miniconda3/envs/aistock/bin/python <脚本名称>.py
```

### 添加到crontab
将上述定时任务添加到系统的crontab中：

```bash
crontab -e
```

然后添加以上列出的所有cron任务行。
